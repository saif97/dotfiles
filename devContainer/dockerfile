# Dev Container for dotfiles
# Build: docker build --platform linux/amd64 -t dev_container -f devContainer/dockerfile .
# Run: docker run --rm -it dev_container

FROM ubuntu:25.10

ARG USERNAME=dev_in_a_box
ENV DEBIAN_FRONTEND=noninteractive
ENV USER_HOME="/home/${USERNAME}"

# Install system packages
COPY devContainer/install-packages.sh /tmp/install-packages.sh
RUN bash /tmp/install-packages.sh

# Install Node.js
RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
    && apt-get install -y nodejs \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Install global npm packages
RUN npm install -g typescript @google/gemini-cli

# Create user
RUN groupadd ${USERNAME} && useradd -ms /bin/zsh -g ${USERNAME} ${USERNAME}

USER ${USERNAME}
WORKDIR ${USER_HOME}

COPY  ../ "$USER_HOME/.config"
